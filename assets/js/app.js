$(".answer").each(function(a,b){noUiSlider.create(this,{start:[5],step:1,connect:[!0,!1],range:{min:0,max:10}})});var countries=void 0,country_names=void 0;$.getJSON("/assets/data/qualityoflife.json",function(a){countries=a.countries,country_names=a.names});var category_result=function(a,b){var c='.category-result[data-category="'+a+'"]';$(c+" > .category-analysis .country-appendix").text(country_names[b[2].country].appendix);var d=$(c).width(),e=64,f=d3.scaleLinear().domain([0,10]).range([52,d-122]),g=d3.scaleLinear().domain([0,5]).range([7,e-7]),h=d3.selectAll(c+" > .category-viz").append("svg").attr("height",e).attr("width",d),i=h.selectAll("g").data(b).enter().append("g");i.append("rect").attr("class",function(a){return a.class}).attr("height",function(a){return"you"===a.class?4:2}).attr("width",function(a){return f(a.value)}).attr("x",f(0)).attr("y",function(a,b){return"you"===a.class?g(b)-1:g(b)}),i.append("text").attr("font-size",10).attr("class",function(a){return a.class}).attr("dy",5).attr("text-anchor","end").attr("x",f(0)-2).attr("y",function(a,b){return g(b)}).text(function(a){return a.name}),i.append("text").attr("font-size",10).attr("class",function(a){return a.class}).attr("dy",5).attr("x",function(a){return f(0)+f(a.value)+2}).attr("y",function(a,b){return g(b)}).text(function(a){return a.country?country_names[a.country].icelandic:a.name})};$("#generate-results").click(function(a){var b={};$(this).hide(),$("#categories").show(),scrollTo("#categories"),$(".answer").each(function(a,c){var d=$(c).data("category"),e=parseInt(this.noUiSlider.get());b[d]=e;var f=_.min(_.pairs(countries[d]),function(a){return a[1]})[0],g=_.max(_.pairs(countries[d]),function(a){return a[1]})[0],h=_.min(_.pairs(countries[d]),function(a){return Math.pow(a[1]-e,2)})[0],i=[{name:"Minnst",class:"min",country:f,value:countries[d][f]},{name:"Þitt svar",class:"you",country:void 0,value:e},{name:"Líkast þér",class:"closest",country:h,value:countries[d][h]},{name:"Ísland",class:"iceland",country:"iceland",value:countries[d].iceland},{name:"Mest",class:"max",country:g,value:countries[d][g]}];category_result(d,i)})});var scrollTo=function(a){var b=$(a);if(b=b.length?b:$("[name="+a.slice(1)+"]"),b.length)return $("html, body").animate({scrollTop:b.offset().top},1e3),!1};$(function(){$('a[href*="#"]:not([href="#"])').click(function(){location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname&&scrollTo(this.hash)})});